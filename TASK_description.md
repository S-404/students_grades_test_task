# Тестовое задание "Студенты и оценки"

Имеется сервис Студентов, с которым можно общаться через NATS. Раз в 15 секунд кто-то из студентов получает оценку по
какому-либо предмету.

Необходимо написать сервис, который будет следить за получением оценок, сохранять их в БД и предоставлять пару HTTP-
эндпоинтов с информацией об успехах студентов.

## Cтек

Предлагаемый стек включает следующие компоненты и библиотеки:
* Nats (https://www.npmjs.com/package/nats)
* Express / Fastify / Nest
* Sequelize / Prisma
* SQLite / Maria / Postgres

Вы можете использовать JavaScript(ES-модули)/TypeScript.

## Ожидаемый результат

* Выполненное задание должно быть предоставлено в виде ZIP-архива(без node_modules) или ссылки на открытый
репозиторий (GitHub, GitLab и т.п.).
* Проект должен запускаться и работать в среде >=Node18, либо предоставить docker-compose.yml для запуска проекта
вместе с необходимым окружением (БД).
* Проект должен включать в себя миграции БД.
* Задокументируйте в Readme.md шаги для запуска проекта, приветствуется пояснения по примененным решениям и
возможные улучшения текущего кода, если бы у проекта были итерации в будущем.

После запуска проекта, должен быть доступен http-сервер на порту 8080, который предоставляет следующие эндпоинты:

### Лог оценок сортированный по дате

<i style="color: lightblue"> Необходимо добавить пагинацию, указываемую через query-параметры. <b> Сортировка списка по  date  , по возрастанию.</b> </i>

    GET /log?[параметры_пагинации]
    content-type: application/json

    [
        {
            date:string // дата-время получения оценки в ISO-формате
            subject:string // код предмета
            grade:number // полученная оценка
            student: {
                personalCode:string // персональный код студента
                name:string // имя студента
                lastName:string// фамилия студента
            }
        },
        ...
    ]

### Статистика студента по всем предметам
    GET /statistic/:personalCode
    content-type: application/json
    
    {
        student: {
            personalCode:string // персональный код студентаname:string// имя студента
            lastName:string// фамилия студента
        },
        statistic: [ // массив инфы по предметам, включая те, по которым у студента не было оценок
            {
                subject:string // код предмета
                maxGrade:number // максимальная оценка
                minGrade:number // минималььная оценка
                avgGrade:number // средняя оценка (дробное число)
                totalGrades:number // всего получено оценок
            },
            ...
        ]
    }

## Интефейс NATS-топиков сервиса Студенты
### Подключение
    Сервер: 192.162.246.63
    Порт: 4222
    Формат сообщений: JSON
### Топики

`students.v1.graded` <i style="color: yellow"> subscribe </i>

Уведомление, что какой-либо студент получил оценку

    {
        data:{
            personalCode:string // персональный код студента
            grade:number // оценка (1-5)
            subject:string // код предмета (biology, science и т.д.)
        }
    }

`students.v1.get` <i style="color: lightgreen"> request </i>

Топик типа запрос-ответ, который возвращает персональную информацию о студенте. Для простоты считаем, что
информация о студенте не может быть изменена в будущем.

<i>Запрос:</i>
    
    {
        personalCode:string // персональный код студента
    }

<i>Успешный ответ:</i>

    {
        data: {
            personalCode:string // персональный код студента
            name: string // имя студента
            lastName: string // фамилия студента
        }
    }

<i>Ответ с ошибкой:</i>

    {
        error:{
            code:string // код ошибки
            message: string // сообщение ошибки
        }
    }

<i>Коды ошибок:</i>
* ERR_WRONG_FORMAT - запрос не в JSON-формате
* ERR_VALIDATION_FAIL - запрос не содержит нужной информации
* ERR_ENTITY_NOT_FOUND - студент с указанным персональным кодом не найден


<hr/>
Версия #9